(this.webpackJsonpcovid=this.webpackJsonpcovid||[]).push([[0],{103:function(e,t,a){"use strict";var n=a(11),r=a(15),i=a(17),o=a(16),c=a(0),l=a.n(c),s=a(25),u=a(26),d=a(19),p=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).reloadApp=function(){r.sendEvent("Reload from Error"),window.location.reload()},r.state={hasError:!1,errorMessage:"",errorStack:"",info:""},r}return Object(r.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({info:t.componentStack}),this.sendEvent("Unhandled Error")}},{key:"sendEvent",value:function(e){this.props.sendEvent(e,this.props.origin,this.state.errorMessage)}},{key:"render",value:function(){if(this.state.hasError){var e=this.props.t,t=this.state,a=t.errorMessage,n=t.errorStack;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,e("Something went wrong :(")),l.a.createElement("button",{onClick:this.reloadApp,style:{padding:"1em"}},l.a.createElement(s.a,{icon:u.h,style:{margin:"0 .8em 0 .2em"}}),e("Try reloading the app to recover from it")),l.a.createElement("div",{style:{textAlign:"left"}},l.a.createElement("h3",null,a),l.a.createElement("details",{style:{whiteSpace:"pre-wrap"}},n)))}return this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,errorMessage:e.message,errorStack:e.stack}}}]),a}(l.a.PureComponent);p.defaultProps={origin:"No name",sendEvent:function(){}},t.a=Object(d.translate)("ErrorCatcher")(p)},189:function(e,t,a){"use strict";a.d(t,"a",(function(){return h})),a.d(t,"b",(function(){return m}));var n=a(0),r=a.n(n),i=a(74),o=a(19),c=a(197),l=a(309),s=a(310),u=a(25),d=a(26),p=function(e){var t=e.icon,a=e.primary,n=e.to,o=r.a.useMemo((function(){return r.a.forwardRef((function(e,t){return r.a.createElement(i.b,Object.assign({to:n,ref:t},e))}))}),[n]);return r.a.createElement("li",null,r.a.createElement(c.a,{button:!0,component:o},t?r.a.createElement(l.a,null,t):null,r.a.createElement(s.a,{primary:a})))},h=Object(o.translate)("Menu")((function(e){var t=e.t;return r.a.createElement("div",null,r.a.createElement(p,{to:"#about",primary:t("About"),icon:r.a.createElement(u.a,{style:{fontSize:"1.5rem"},icon:d.f})}))})),m=function(e){return r.a.createElement("div",null)}},195:function(e,t,a){"use strict";var n=a(6),r={"Covid Data - Refactored":"Dades Covid - Refactoritzada","Covid Data":"Dades Covid",Refactored:"Refactoritzada",Close:"Tanca",About:"Quant a...",Help:"Ajuda",Yes:"Si",No:"No",or:"o"},i={locale:"fr",App:Object(n.a)({},r),Copyright:Object(n.a)({},r,{"Source code of:":"Codi font de"}),ErrorCatcher:Object(n.a)({},r,{"Something went wrong :(":"Alguna cosa ha anat malament :(","Try reloading the app to recover from it":"Intenta recarregar l'aplicaci\xf3 per a continuar"}),Menu:Object(n.a)({},r,{Menu:"Men\xfa","Update!":"Actualitza!","New update available!":"Nova versi\xf3 disponible!"}),ModalRouter:Object(n.a)({},r),About:Object(n.a)({},r,{"This applications displays public information extracted from the official web":"Aquesta aplicaci\xf3 mostra informaci\xf3 p\xfablica extreta de la p\xe1gina web oficial","The aim of this application is to display the data in different ways than the original, improving performance and adding more value to it.":"La finalitat d'aquesta aplicaci\xf3 \xe9s mostrar les dades de formes diferents a l'original, millorant-ne el rendiment i afegint-ne m\xe9s valor.","Want more information?":"Vols m\xe9s informaci\xf3?","The source code is publicly available.":"El codi font \xe9s p\xfablicament accessible.","There, you can find more information about how it has been done, licence and credits.":"All\xe0 trobar\xe0s m\xe9s informaci\xf3 sobre com s'ha fet, llic\xe8ncies i cr\xe8dits.","Found a bug? Have a petition? Want to help somehow?":"Has trobat un error? Tens una petici\xf3? Vols ajudar d'alguna forma?","Create an issue at GitHub.":"Crea una incid\xe8ncia a GitHub",Licenses:"Llic\xe8ncies","The application, scripts and documentation in":"L'aplicaci\xf3, scripts i documentaci\xf3 a","this project":"aquest projecte","are released under the":"han sigut alliberats sota la","The scripts and documentation published in":"Els scripts i documentaci\xf3 publicats a","are also released under the":"tamb\xe9 estan alliberades sota la","The data scrapped and published in":"Les dades aconseguides de la web oficial i publicades a","is licensed by their owner, the":"ha estat llicenciada pel seu propietari, la",", under their own conditions (":", sota les seves pr\xf2pies condicions (",", until now).":", fins ara).","See more at the":"Pots trobar m\xe9s informaci\xf3 a la","dataset API documentation":"documentaci\xf3 de l'API del dataset"}),Help:Object(n.a)({},r),WidgetsList:Object(n.a)({},r),MenuAddWidget:Object(n.a)({},r,{Map:"Mapa",Chart:"Gr\xe0fic","Add a graph":"Afegeix un gr\xe0fic",add:"afegeix"}),PlayPause:Object(n.a)({},r,{"Toggle play status":"Commuta l'estat de reproducci\xf3",play:"Reprodueix",pause:"Pausa"}),Widget:Object(n.a)({},r,{remove:"elimina",Remove:"Elimina","Remove?":"Eliminar?","Confirm removal":"Confirma l'eliminaci\xf3",View:"Veure",Edit:"Edita",Legend:"Llegenda","Edit map parameters":"Edita les opcions del mapa","Edit chart parameters":"Edita les opcions del gr\xe0fic"}),"Widget/Map/Edit":{Type:"Tipus","Select the regions type to show":"Selecciona el tipus de regions a mostrar",Values:"Valors","Select the data origin":"Selecciona l'origen de les dades"},"Widget/Chart/Edit":{Division:"Divisi\xf3 territorial","Select the division type to show":"Selecciona la divisi\xf3 territorial a usar",Population:"Poblaci\xf3","Select the population":"Selecciona la poblaci\xf3",Dataset:"Conjunt de dades","Select the dataset":"Selecciona el conjunt de dades a usar","Extensi\xf3":"Extensi\xf3","Risc iEPG":"Risc iEPG",Region:"Regi\xf3","Select the region":"Selecciona la regi\xf3"}},o={"Covid Data - Refactored":"Datos Covid - Refactorizada","Covid Data":"Datos Covid",Refactored:"Refactorizada",Close:"Cerrar",About:"Sobre...",Help:"Ayuda",Yes:"S\xed",No:"No",or:"o"},c={locale:"es",App:Object(n.a)({},o),Copyright:Object(n.a)({},o,{"Source code of:":"C\xf3digo fuente de"}),ErrorCatcher:Object(n.a)({},o,{"Something went wrong :(":"Algo ha ido mal :(","Try reloading the app to recover from it":"Intenta recargar la aplicaci\xf3n para continuar"}),Menu:Object(n.a)({},o,{Menu:"Men\xfa","Update!":"\xa1Actualizar!","New update available!":"\xa1Nueva actualizaci\xf3n disponible!"}),ModalRouter:Object(n.a)({},o),About:Object(n.a)({},o,{"This applications displays public information extracted from the official web":"Esta aplicaci\xf3n muestra informaci\xf3n p\xfablica extra\xedda de la p\xe1gina web oficial","The aim of this application is to display the data in different ways than the original, improving performance and adding more value to it.":"El prop\xf3sito de esta aplicaci\xf3n es mostrar los datos de una manera distinta al original, mejorando su rendimiento y a\xf1adi\xe9ndole m\xe1s valor.","Want more information?":"\xbfQuieres saber m\xe1s?","The source code is publicly available.":"El c\xf3digo fuente est\xe1 disponible al p\xfablico.","There, you can find more information about how it has been done, licence and credits.":"Ah\xed puedes encontrar m\xe1s informaci\xf3n sobre c\xf3mo se ha hecho, la licencia y los cr\xe9ditos.","Found a bug? Have a petition? Want to help somehow?":"\xbfHas encontrado un bug? \xbfTienes alguna petici\xf3n? \xbfQuieres ayudar de alguna forma?","Create an issue at GitHub.":"Abre un nuevo issue en GitHub.",Licenses:"Licencias","The application, scripts and documentation in":"La aplicaci\xf3n, scripts y documentaci\xf3n de","this project":"este projecto","are released under the":"est\xe1n publicados bajo la","The scripts and documentation published in":"Los scripts y la documentaci\xf3n publicada en","are also released under the":"tambi\xe9n est\xe1n publicados bajo la","The data scrapped and published in":"Los datos recolectados y publicados en","is licensed by their owner, the":"est\xe1 bajo la licencia de su propietario, ",", under their own conditions (":", bajo sus propias condiciones (",", until now).":", hasta ahora).","See more at the":"Ver m\xe1s en la","dataset API documentation":"documentaci\xf3n de la API del dataset"}),Help:Object(n.a)({},o),WidgetsList:Object(n.a)({},o),MenuAddWidget:Object(n.a)({},o,{Map:"Mapa",Chart:"Gr\xe1fico","Add a graph":"A\xf1adir un gr\xe1fico",add:"a\xf1adir"}),PlayPause:Object(n.a)({},o,{"Toggle play status":"Conmutat el estado de reproducci\xf3n",play:"reproducir",pause:"detener"}),Widget:Object(n.a)({},o,{remove:"eliminar",Remove:"Eliminar","Remove?":"Eliminar?","Confirm removal":"Confirmar la eliminaci\xf3n",View:"Ver",Edit:"Editar",Legend:"Leyenda","Edit map parameters":"Editar las opciones del mapa","Edit chart parameters":"Editar las opciones del gr\xe1fico"}),"Widget/Map/Edit":{Type:"Tipo","Select the regions type to show":"Seleccionar el tipo de regiones a mostrar",Values:"Valores","Select the data origin":"Selecciona el origen de los datos"},"Widget/Chart/Edit":{Division:"Divisi\xf3n territorial","Select the division type to show":"Seleccionar la divisi\xf3n territorial a usar",Population:"Poblaci\xf3n","Select the population":"Seleccionar la poblaci\xf3n",Dataset:"Conjunto de datos","Select the dataset":"Seleccionar el conjunto de datos a usar","Extensi\xf3":"Extensi\xf3n","Risc iEPG":"Riesgo iEPG",Region:"Regi\xf3n","Select the region":"Seleccionar la regi\xf3n"}},l={"Covid Data - Refactored":"Covid Data - Refactored","Covid Data":"Covid Data",Refactored:"Refactored",Close:"Close",About:"About...",Help:"Help",Yes:"Yes",No:"No",or:"or"},s={locale:"en",App:Object(n.a)({},l),Copyright:Object(n.a)({},l,{"Source code of:":"Source code of:"}),ErrorCatcher:Object(n.a)({},l,{"Something went wrong :(":"Something went wrong :(","Try reloading the app to recover from it":"Try reloading the app to recover from it"}),Menu:Object(n.a)({},l,{Menu:"Menu","Update!":"Update!","New update available!":"New update available!"}),ModalRouter:Object(n.a)({},l),About:Object(n.a)({},l,{"This applications displays public information extracted from the official web":"This applications displays public information extracted from the official web","The aim of this application is to display the data in different ways than the original, improving performance and adding more value to it.":"The aim of this application is to display the data in different ways than the original, improving performance and adding more value to it.","Want more information?":"Want more information?","The source code is publicly available.":"The source code is publicly available.","There, you can find more information about how it has been done, licence and credits.":"There, you can find more information about how it has been done, licence and credits.","Found a bug? Have a petition? Want to help somehow?":"Found a bug? Have a petition? Want to help somehow?","Create an issue at GitHub.":"Create an issue at GitHub.",Licenses:"Licenses","The application, scripts and documentation in":"The application, scripts and documentation in","this project":"this project","are released under the":"are released under the","The scripts and documentation published in":"The scripts and documentation published in","are also released under the":"are also released under the","The data scrapped and published in":"The data scrapped and published in","is licensed by their owner, the":"is licensed by their owner, the",", under their own conditions (":", under their own conditions (",", until now).":", until now).","See more at the":"See more at the","dataset API documentation":"dataset API documentation"}),Help:Object(n.a)({},l),WidgetsList:Object(n.a)({},l),MenuAddWidget:Object(n.a)({},l,{Map:"Map",Chart:"Chart","Add a graph":"Add a graph",add:"add"}),PlayPause:Object(n.a)({},l,{"Toggle play status":"Toggle play status",play:"play",pause:"pause"}),Widget:Object(n.a)({},l,{remove:"remove",Remove:"Remove","Remove?":"Remove?","Confirm removal":"Confirm removal",View:"View",Edit:"Edit",Legend:"Legend","Edit map parameters":"Edit map parameters","Edit chart parameters":"Edit chart parameters"}),"Widget/Map/Edit":{Type:"Type","Select the regions type to show":"Select the regions type to show",Values:"Values","Select the data origin":"Select the data origin"},"Widget/Chart/Edit":{Division:"Division","Select the division type to show":"Select the division type to show",Population:"Population","Select the population":"Select the population",Dataset:"Dataset","Select the dataset":"Select the dataset","Extensi\xf3":"Extensi\xf3","Risc iEPG":"Risc iEPG",Region:"Region","Select the region":"Select the region"}},u={"Covid Data - Refactored":"Covid Data - Refactored","Covid Data":"Covid Data",Refactored:"Refactored",Close:"Zamknij",About:"O Covid Data...",Help:"Pomoc",Yes:"Tak",No:"Nie",or:"albo"},d={locale:"pl",App:Object(n.a)({},u),Copyright:Object(n.a)({},u,{"Source code of:":"Kod \u017ar\xf3d\u0142owy:"}),ErrorCatcher:Object(n.a)({},u,{"Something went wrong :(":"Co\u015b posz\u0142o nie tak :(","Try reloading the app to recover from it":"Spr\xf3buj od\u015bwie\u017cy\u0107 stron\u0119 by si\u0119 z tego wydosta\u0107"}),Menu:Object(n.a)({},u,{Menu:"Menu","Update!":"Aktualizacja!","New update available!":"Nowa aktualizacja dost\u0119pna!"}),ModalRouter:Object(n.a)({},u),About:Object(n.a)({},u,{"This applications displays public information extracted from the official web":"Aplikacja pokazuje publicznie dost\u0119pne informacje z oficjalnych \u017ar\xf3de\u0142","The aim of this application is to display the data in different ways than the original, improving performance and adding more value to it.":"Celem aplikacji jest pokazanie danych na inne sposoby ni\u017c dotychczas dost\u0119pne, daj\u0105c warto\u015b\u0107 ze sposobu ukazania ich.","Want more information?":"Potrzebujesz wi\u0119cej informacji?","The source code is publicly available.":"Kod \u017ar\xf3d\u0142owy jest dost\u0119pny publicznie.","There, you can find more information about how it has been done, licence and credits.":"Tutaj mo\u017cesz znale\u017a\u0107 informacje o powstawaniu aplikacji, licencjach oraz autorach.","Found a bug? Have a petition? Want to help somehow?":"B\u0142\u0105d? Pomys\u0142? Chcesz pom\xf3c?","Create an issue at GitHub.":"Stw\xf3rz ticket na GitHubie.",Licenses:"Licencje","The application, scripts and documentation in":"Aplikacja, skrypty i dokumentacja w","this project":"ten projekt","are released under the":"jest wydawany w ramach","The scripts and documentation published in":"Skrypty i dokumentacja udost\u0119pniona w ","are also released under the":"tak\u017ce udost\u0119pniane jako","The data scrapped and published in":"Dane pochodz\u0105ce i udost\u0119pnione w","is licensed by their owner, the":"licencjonowane przez w\u0142a\u015bciciela: ",", under their own conditions (":", na ich w\u0142asnych zasadach (",", until now).":", dotychczas).","See more at the":"Sprawd\u017a wi\u0119cej na","dataset API documentation":"dokumentacja \u017ar\xf3d\u0142a API"}),Help:Object(n.a)({},u),WidgetsList:Object(n.a)({},u),MenuAddWidget:Object(n.a)({},u,{Map:"Mapa",Chart:"Wykres","Add a graph":"Dodaj wykres",add:"dodaj"}),PlayPause:Object(n.a)({},u,{"Toggle play status":"Prze\u0142\u0105cz status",play:"play",pause:"pause"}),Widget:Object(n.a)({},u,{remove:"usu\u0144",Remove:"Usu\u0144","Remove?":"Usun\u0105\u0107??","Confirm removal":"Potwierd\u017a usuni\u0119cie",View:"Widok",Edit:"Edycja",Legend:"Legenda","Edit map parameters":"Edytuj parametry mapy","Edit chart parameters":"Edytuj parametry wykres"}),"Widget/Map/Edit":{Type:"Typ","Select the regions type to show":"Wybierz regiony do pokazania",Values:"Warto\u015b\u0107","Select the data origin":"Wybierz \u017ar\xf3d\u0142o"},"Widget/Chart/Edit":{Division:"Division","Select the division type to show":"Select the division type to show",Population:"Population","Select the population":"Select the population",Dataset:"Dataset","Select the dataset":"Select the dataset","Extensi\xf3":"Extensi\xf3","Risc iEPG":"Risc iEPG",Region:"Region","Select the region":"Select the region"}};t.a={en:s,"en-en":s,"en-us":s,"en-au":s,ca:i,"ca-es":i,es:c,"es-es":c,pl:d,"pl-pl":d}},278:function(e,t,a){"use strict";(function(e){var n=a(11),r=a(15),i=a(17),o=a(16),c=a(0),l=a.n(c),s=a(74),u=a(132),d=a.n(u),p=a(19),h=a(187),m=a(195),f=a(103),g=a(306),v=a(303),b=function(e){var t=Object(p.useTranslate)("App")("Covid Data - Refactored");return l.a.createElement(h.a,{titleTemplate:"%s | ".concat(t),defaultTitle:t},l.a.createElement("html",{lang:e.language}))},y=function(e){return l.a.createElement(p.TranslatorProvider,{translations:e.translations},l.a.createElement(h.b,null,l.a.createElement(b,{language:e.language}),l.a.createElement(s.a,null,l.a.createElement("div",{className:"App",id:"router-container"},e.children))))},E=function(t){Object(o.a)(c,t);var a=Object(i.a)(c);function c(){var t;Object(n.a)(this,c),(t=a.call(this)).handleNewServiceWorker=function(e){t.registration=e.detail.registration,t.setState({newServiceWorkerDetected:!0})},t.handleLoadNewServiceWorkerAccept=function(){return t.props.onLoadNewServiceWorkerAccept(t.registration)},t.handleLanguageChange=function(e){return t.setState({language:e})},t.handleThemeChange=function(e){return t.setState({theme:e})},t.handleTutorialSeenChange=function(e){return t.setState({tutorialSeen:e})};var r=decodeURIComponent(e.location.hash);if(""!==r&&r!==e.location.hash){var i=r.replace(/[^#]*(#.*)$/,"$1");e.location.replace(i)}t.registration=!1;var o=navigator.language.toLowerCase();return t.state={initializing:!0,newServiceWorkerDetected:!1,language:m.a.hasOwnProperty(o)?o:"ca-es",theme:!1,tutorialSeen:!1},t}return Object(r.a)(c,[{key:"componentDidMount",value:function(){document.addEventListener("onNewServiceWorker",this.handleNewServiceWorker)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("onNewServiceWorker",this.handleNewServiceWorker)}},{key:"render",value:function(){var e=this,t=this.state,a=t.newServiceWorkerDetected,n=t.language,r=t.theme,i=t.tutorialSeen,o=m.a[n];return l.a.createElement(y,{translations:o,language:n},l.a.createElement(d.a,{parent:this,prefix:"App",blacklist:["newServiceWorkerDetected","initializing"],onParentStateHydrated:function(){return e.setState({initializing:!1})}}),l.a.createElement(f.a,{origin:"Dashboard"},l.a.createElement(g.a,{newServiceWorkerDetected:a,onLoadNewServiceWorkerAccept:this.handleLoadNewServiceWorkerAccept,language:n,onLanguageChange:this.handleLanguageChange,theme:r,onThemeChange:this.handleThemeChange,tutorialSeen:i,onTutorialSeen:this.handleTutorialSeenChange},l.a.createElement(f.a,{origin:"WidgetsList"},l.a.createElement(v.a,null)))))}}]),c}(l.a.Component);t.a=E}).call(this,a(37))},281:function(e,t,a){"use strict";(function(e){var n=a(48),r=a(6),i=a(0),o=a.n(i),c=a(19),l=a(4),s=a(658),u=a(29),d=a(40),p=a(666),h=a(49),m=a(312),f=a(311),g=a(139),v=a.n(g),b=a(313),y=a(282),E=a.n(y),j=a(314),C=a(197),w=a(309),O=a(310),k=a(25),D=a(26),S=a(189),x=Object(s.a)((function(e){return{toolbarIcon:Object(r.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(n.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),updateItem:{color:"green"}}})),P=Object(c.translate)("Menu")((function(e){var t=x(),a=e.t;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:t.toolbarIcon},o.a.createElement(f.a,{edge:"start",color:"inherit","aria-label":a("close menu"),onClick:e.handleDrawerClose},o.a.createElement(v.a,null)),o.a.createElement(h.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:t.title},a("Menu")),o.a.createElement(f.a,{"aria-label":a("close menu"),onClick:e.handleDrawerClose},o.a.createElement(E.a,null))),o.a.createElement(m.a,null),o.a.createElement(b.a,null,o.a.createElement(S.a,null)),o.a.createElement(m.a,null),o.a.createElement(b.a,null,o.a.createElement(S.b,null)))})),T=Object(c.translate)("Menu")((function(t){var a=x(),n=t.handleDrawerOpen,r=t.handleDrawerClose,i=t.open,c=t.newServiceWorkerDetected,s=t.t,h=Object(u.a)(),m=Object(j.a)(h.breakpoints.up("md")),f=m?d.a:p.a,g=e.browser&&/iPad|iPhone|iPod/.test(navigator.userAgent),v=function(e){return function(t){(!t||"keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&(e?n():r())}};return o.a.createElement(f,Object.assign({},m?{variant:"permanent"}:{anchor:"left",onClose:v(!1),onOpen:v(!0),disableBackdropTransition:!g,disableDiscovery:g},{classes:{paper:Object(l.a)(a.drawerPaper,!i&&a.drawerPaperClose)},open:i}),o.a.createElement(P,{handleDrawerClose:r}),c?o.a.createElement(C.a,{button:!0,onClick:function(e){e.preventDefault(),r(),t.onLoadNewServiceWorkerAccept()},title:s("New update available!"),className:a.updateItem},o.a.createElement(w.a,null,o.a.createElement(k.a,{icon:D.a,style:{fontSize:"1.5rem",color:"green"}})),o.a.createElement(O.a,{primary:s("Update!")})):null)}));t.a=T}).call(this,a(151))},283:function(e,t,a){"use strict";(function(e){var n,r=a(20),i=a(6),o=a(11),c=a(15),l=a(17),s=a(16),u=a(0),d=a.n(u),p=a(24),h=a(660),m=a(662),f=a(661),g=a(663),v=a(314),b=a(29),y=a(19),E=function(t){Object(s.a)(n,t);var a=Object(l.a)(n);function n(t){var r;return Object(o.a)(this,n),r=a.call(this),"history"in t&&""===t.history.location.hash||(console.log("CloseModal: ",{props:t}),e.setTimeout((function(){return t.history.push("#")}),10)),r}return Object(c.a)(n,[{key:"render",value:function(){return null}}]),n}(d.a.PureComponent),j=function(t){Object(s.a)(n,t);var a=Object(l.a)(n);function n(t){var r;return Object(o.a)(this,n),(r=a.call(this)).openModal=function(){return r.setState({modalIsOpen:!0})},r.closeModal=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"history"in t&&""===t.history.location.path||r.timer||(r.timer=e.setTimeout((function(){r.history.push("#"),r.timer=void 0}),10))},r.handleHistoryChange=function(e,t){var a=r.getPathState(e);r.setState(a)},r.history=t.history,r.state=Object(i.a)({},r.getPathState(t.location),{autoForce:!1,forced:t.force}),r}return Object(c.a)(n,[{key:"getPathState",value:function(e){var t=e.hash.replace(/[^#]*#(.*)$/,"$1");return{modalIsOpen:!!t.length&&"close"!==t,path:t,initialPath:this.state?this.state.initialPath:t}}},{key:"componentDidMount",value:function(){this.unlisten=this.history.listen(this.handleHistoryChange)}},{key:"componentWillUnmount",value:function(){this.unlisten(),this.timer&&e.clearTimeout(this.timer)}},{key:"componentDidUpdate",value:function(e,t){!1!==this.props.force&&this.props.force!==e.force&&this.state.forced!==this.props.force&&this.setState({forced:this.props.force}),this.state.autoForce===this.state.path&&this.setState({autoForce:!1}),t.path===this.state.forced&&t.path!==this.state.path&&!1!==this.state.initialPath&&this.state.initialPath.length>1&&this.state.autoForce!==this.state.initialPath&&this.setState({autoForce:this.state.initialPath})}},{key:"render",value:function(){var e=this.props,t=e.children,a=e.initializing,n=e.force,r=e.fullScreen,i=e.t,o=this.state,c=o.autoForce,l=o.path,s=o.forced;return a?null:!1!==n&&n!==l?d.a.createElement(p.a,{push:!0,to:{hash:n}}):!1!==c&&c!==l&&s!==l?d.a.createElement(p.a,{push:!0,to:{hash:c}}):d.a.createElement(h.a,{open:this.state.modalIsOpen,onClose:this.closeModal,fullScreen:r,"aria-labelledby":"modal_heading","aria-describedby":"modal_description"},d.a.createElement(f.a,null,d.a.createElement(p.d,{location:{pathname:l}},t,d.a.createElement(p.b,{render:function(e){return d.a.createElement(E,e)}}))),d.a.createElement(m.a,null,d.a.createElement(g.a,{autoFocus:!0,onClick:this.closeModal,color:"primary"},i("Close"))))}}]),n}(d.a.PureComponent),C=(n=j,function(e){var t=Object(b.a)(),a=Object(v.a)(t.breakpoints.down("sm"));return d.a.createElement(n,Object.assign({},e,{fullScreen:a}))}),w=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.children,a=Object(r.a)(e,["children"]);return d.a.createElement(p.b,{path:":path(.*)",render:function(e){return d.a.createElement(C,Object(i.a)({children:t},a,{},e))}})}}]),a}(d.a.PureComponent);t.a=Object(y.translate)("ModalRouter")(w)}).call(this,a(37))},285:function(e,t,a){e.exports=a.p+"static/media/loading.73ea1e4a.svg"},302:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function r(e){if("serviceWorker"in navigator){if(new URL("/covid",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/covid","/service-worker.js");n?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):i(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):i(t,e)}))}}function i(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}},303:function(e,t,a){"use strict";a.d(t,"a",(function(){return Kt}));var n,r=a(20),i=a(6),o=a(0),c=a.n(o),l=a(19),s=a(658),u=a(715),d=a(716),p=a(717),h=a(663),m=a(25),f=a(26),g=a(11),v=a(15),b=a(17),y=a(16),E=a(660),j=a(662),C=a(661),w=a(714),O=a(314),k=a(29),D=a(284),S=a.n(D),x=a(91),P=a(311),T=a(305),R=a(712),M=a(309),A=a(310),N=c.a.forwardRef((function(e,t){var a=e.onClick,n=e.option,r=e.icon,i=e.label;return c.a.createElement(R.a,{key:n,onClick:function(){return a(n)},ref:t},c.a.createElement(M.a,null,r),c.a.createElement(A.a,{primary:i||n}))})),I=Object(l.translate)("Widget")((function(e){var t=e.onClick,a=e.options,n=e.id,i=Object(r.a)(e,["onClick","options","id"]),o=c.a.useState(null),l=Object(x.a)(o,2),s=l[0],u=l[1],d=Boolean(s),p=function(){return u(null)},h=function(e){p(),t(e)};return c.a.createElement("div",null,c.a.createElement(P.a,{"aria-label":"widget actions","aria-controls":"widget-menu-".concat(n),"aria-haspopup":"true",onClick:function(e){return u(e.currentTarget)}},c.a.createElement(m.a,{icon:f.d})),s?c.a.createElement(T.a,{id:"widget-menu-".concat(n),anchorEl:s,keepMounted:!0,open:d,onClose:p,PaperProps:{style:{width:"20ch"}}},Object.keys(a).filter((function(e){return"view"!==e})).map((function(e){return c.a.createElement(N,{key:e,option:e,onClick:h,icon:a[e].icon,label:"function"===typeof a[e].label?a[e].label(i):a[e].label})}))):null)})),W=function(e){Object(y.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={open:!1},e.handleClickOpen=function(t){e.setState({open:t})},e.handleClose=function(){e.setState({open:!1})},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this.state.open,t=this.props.id,a=this.props,n=a.sections,i=a.fullScreen,o=a.t,l=Object(r.a)(a,["sections","fullScreen","t"]),s=e?n[e].render:function(){},u=e?n[e].title:function(){};return c.a.createElement("div",null,c.a.createElement(I,Object.assign({options:n,id:t,onClick:this.handleClickOpen},l)),e?c.a.createElement(E.a,Object.assign({key:e,open:!0,onClose:this.handleClose},i?{}:{TransitionComponent:S.a},{fullScreen:i,"aria-labelledby":"draggable-dialog-title-".concat(t,"-").concat(e)}),c.a.createElement(w.a,{style:{cursor:"move"},id:"draggable-dialog-title-".concat(t,"-").concat(e)},c.a.createElement(u,Object.assign({},l,{t:o}))),c.a.createElement(C.a,null,c.a.createElement(s,Object.assign({},l,{t:o}))),c.a.createElement(j.a,null,c.a.createElement(h.a,{autoFocus:!0,onClick:this.handleClose,color:"primary"},o("Close")))):null)}}]),a}(c.a.PureComponent),V=Object(l.translate)("Widget")(W),U=(n=V,function(e){var t=Object(k.a)(),a=Object(O.a)(t.breakpoints.down("sm"));return c.a.createElement(n,Object.assign({},e,{fullScreen:a}))}),L=Object(s.a)((function(e){return{root:{height:"100%"}}})),F=function(e){var t=Object(i.a)({},e,{remove:{icon:c.a.createElement(m.a,{icon:f.i}),label:function(e){return(0,e.t)("Remove")},title:function(e){return(0,e.t)("Remove?")},render:function(e){var t=e.id,a=e.onRemove,n=e.t;return c.a.createElement(h.a,{startIcon:c.a.createElement(m.a,{icon:f.i}),onClick:function(){return a(t)},variant:"contained",color:"primary","aria-label":n("remove")},n("Confirm removal"))}}}),a=t.view.render;return Object(l.translate)("Widget")((function(e){var n=L(),i=(e.indexValues,Object(r.a)(e,["indexValues"])),o=c.a.createElement(U,Object.assign({},i,{sections:t}));return c.a.createElement(u.a,{className:n.root},c.a.createElement(d.a,{action:o,title:t.view.title(e)||e.name,subheader:e.subtitle}),c.a.createElement(p.a,null,c.a.createElement(a,e)))}))},z=c.a.createContext((function(){})),G=function(e,t){var a=function(a){Object(y.a)(i,a);var n=Object(b.a)(i);function i(){var a;Object(g.a)(this,i);for(var o=arguments.length,l=new Array(o),s=0;s<o;s++)l[s]=arguments[s];return(a=n.call.apply(n,[this].concat(l))).dataHandler=function(n){var i=a.props,o=i.forwardedRef,l=Object(r.a)(i,["forwardedRef"]),s=n.onChangeData,u=void 0===s?function(){}:s,d=Object(r.a)(n,["onChangeData"]),p=Object.assign({},t,d,l);return c.a.createElement(e,Object.assign({ref:o,onChangeData:u},p))},a}return Object(v.a)(i,[{key:"render",value:function(){return c.a.createElement(z.Consumer,null,this.dataHandler)}}]),i}(c.a.Component),n=c.a.forwardRef((function(e,t){return c.a.createElement(a,Object.assign({},e,{forwardedRef:t}))}));return n.defaultProps=e.defaultProps,n},H=a(24),_=a(132),K=a.n(_),B=a(285),q=a.n(B),Y=function(e){var t=e.style,a=void 0===t?{}:t,n=e.restProps;return c.a.createElement("img",Object.assign({alt:"Loading...",src:q.a,style:Object(i.a)({width:"80%",margin:"auto",display:"block"},a)},n))},J=function(e){Object(y.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={initializing:!0,data:{}},e.onChangeData=function(t){e.setState({data:t})},e.stopInitializing=function(){e.setState({initializing:!1})},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props,t=e.children,a=Object(r.a)(e,["children"]),n=this.state,o=n.initializing,l=n.data;return c.a.createElement(c.a.Fragment,null,c.a.createElement(K.a,{parent:this,prefix:"LocalStorageProvider",blacklist:["initializing"],onParentStateHydrated:this.stopInitializing}),o?c.a.createElement(Y,null):c.a.createElement(z.Provider,{value:Object(i.a)({onChangeData:this.onChangeData},a,{data:l})},t))}}]),a}(c.a.Component),$=function(e){Object(y.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(g.a)(this,a),(n=t.call(this,e)).unlisten=function(){},n.historyPush=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=n.props.paramsToString(e);n.history.location.pathname!==a&&(t?n.history.replace(a+n.history.location.hash):n.history.push(a+n.history.location.hash))},n.handleHistoryChange=function(e,t){},n.componentDidMount=function(){n.unlisten=n.history.listen(n.handleHistoryChange),!n.props.params.widgets.length&&n.props.data.widgets&&n.props.data.widgets.length&&n.historyPush(n.props.data,!0)},n.componentWillUnmount=function(){n.unlisten()},n.onChangeData=function(e){n.historyPush(Object(i.a)({},e),!0),n.props.onChangeData(Object(i.a)({},e))},n.history=e.history,n}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.data,n=e.params,o=(e.paramsFilter,e.paramsToString,e.history,e.onChangeData,Object(r.a)(e,["children","data","params","paramsFilter","paramsToString","history","onChangeData"]));return c.a.createElement(z.Provider,{value:Object(i.a)({onChangeData:this.onChangeData},o,{},a,{},n)},t)}}]),a}(c.a.Component),Q=G((function(e){var t=e.pathFilter,a=e.paramsFilter,n=e.paramsToString,i=Object(r.a)(e,["pathFilter","paramsFilter","paramsToString"]);return c.a.createElement(H.d,null,c.a.createElement(H.b,{path:t,render:function(e){var t=e.match.params,r=e.history,o=a(t);return c.a.createElement($,Object.assign({paramsFilter:a,paramsToString:n,history:r},i,{params:o}))}}))}),{data:{widgets:{type:"map"}}}),X=function(e){var t=e.children,a=e.pathFilter,n=e.paramsFilter,r=e.paramsToString;return c.a.createElement(J,null,c.a.createElement(Q,{pathFilter:a,paramsFilter:n,paramsToString:r},t))},Z=a(38),ee=a(48),te=a(4),ae=a(5),ne=a(721),re=a(199),ie=a(724),oe=c.a.forwardRef((function(e,t){var a=e.onClick,n=e.option,r=e.icon,i=e.label;return c.a.createElement(R.a,{key:n,onClick:function(){return a(n)},ref:t},c.a.createElement(M.a,null,r),c.a.createElement(A.a,{primary:i||n}))})),ce=Object(l.translate)("MenuAddWidget")((function(e){var t=e.t,a=e.onAdd,n=e.options,r=c.a.useState(null),i=Object(x.a)(r,2),o=i[0],l=i[1],s=Boolean(o),u=function(){return l(null)},d=function(e){u(),a(e)};return c.a.createElement("div",null,c.a.createElement(ie.a,{title:t("Add a graph"),"aria-label":t("add")},c.a.createElement(P.a,{onClick:function(e){return l(e.currentTarget)},color:"primary","aria-label":t("add"),"aria-haspopup":"true",className:e.className},c.a.createElement(m.a,{icon:f.g}))),o?c.a.createElement(T.a,{id:"widget-add-menu",anchorEl:o,keepMounted:!0,open:s,onClose:u,transformOrigin:{vertical:"center",horizontal:"right"},PaperProps:{style:{width:"30ch"}}},n.map((function(e){return c.a.createElement(oe,{key:e.key,option:e.key,onClick:d,icon:e.icon,label:t(e.name)})}))):null)})),le=a(89),se=a(95),ue=a.n(se),de=a(67),pe=a(142),he=function(){},me=function(){function e(t){var a=this;Object(g.a)(this,e),this.name="Common",this.controller=new AbortController,this.handleFetchErrors=function(e){return e.ok?e:new Error("".concat(a.name," backend: ").concat(e.statusText))},this.catchFetchErrors=function(e){"AbortError"===e.name?console.log("Connection aborted",e):(e.message="".concat(a.name," backend: ").concat(e.message),a.onError(e))},this.onUpdate=t&&t.onUpdate?t.onUpdate:he,this.onError=t&&t.onError?t.onError:he}return Object(v.a)(e,[{key:"abort",value:function(){this.controller.abort(),this.controller=new AbortController}}]),e}(),fe=function(e){return 0===e.length?0:Object(Z.a)(e).map((function(e){return e.charCodeAt(0)})).reduce((function(e,t){var a=(e<<5)-e+t;return a&a}),0)},ge=function e(t){var a=this;Object(g.a)(this,e),this.signal=null,this.result=null,this.lastModified=0,this.invalidated=!1,this.listeners=[],this.url="",this.handleFetchErrors=function(e){if(!e.ok)throw new Error("".concat(e.statusText));return e},this.catchFetchErrors=function(e){"AbortError"===e.name||(e.message="".concat(a.url,": ").concat(e.message),a.onError(e))},this.cleanFetch=function(){return a.signal=null},this.onError=function(e){a.listeners.forEach((function(t){t.onError(e)})),a.cleanFetch()},this.addListener=function(e,t){return a.listeners.push({onSuccess:e,onError:t}),a.signal||null!==a.result||a.fetch(),a.invalidated||null===a.result||new Promise((function(e,t){return e(a.result)})).then(e),function(){return a.removeListener(e)}},this.removeListener=function(e){var t=a.listeners.map((function(e,t){return{listener:e,index:t}})).find((function(t){return t.listener.onSuccess===e}));t?a.listeners.splice(t.index,1):console.warning("Remove listener from ".concat(a.url,": Listener not found")),a.signal&&0===a.listeners.length&&(a.signal.abort(),a.cleanFetch())},this.processSuccessFetch=function(e){var t=e.result,n=e.lastModified;return a.result=t,a.lastModified=n,a.listeners.forEach((function(e){return e.onSuccess(a.result)})),a.cleanFetch(),a.result},this.getLastModifiedFromResponse=function(e){return new Date(e.headers.get("last-modified"))},this.fetch=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return a.signal=new AbortController,fetch(a.url,{signal:a.signal.signal}).then(a.handleFetchErrors).then((function(e){return e.json().then((function(t){return{result:t,lastModified:a.getLastModifiedFromResponse(e)}}))})).then(a.processSuccessFetch).then(e).catch(a.catchFetchErrors)},this.checkIfNeedUpdate=function(e,t){fetch(a.url,{method:"HEAD"}).then(a.handleFetchErrors).then(a.getLastModifiedFromResponse).then((function(e){return e>a.lastModified})).then(e).catch(t)},this.invalidate=function(){return new Promise((function(e,t){null!==a.result?(a.invalidated=!0,a.listeners.length>0?a.fetch(e):e()):e()}))},this.url=t},ve=new function e(){var t=this;Object(g.a)(this,e),this.data={},this.name="Cache manager",this.fetch=function(e,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=fe(e);return r in t.data||(t.data[r]=new ge(e)),t.data[r].addListener(a,n)},this.checkIfNeedUpdate=function(e,a,n){var r=fe(e);t.data[r].checkIfNeedUpdate(a,n)},this.invalidate=function(e){var a=fe(e);return a in t.data?t.data[a].invalidate():new Promise((function(e,t){e()}))}};Object.freeze(ve);var be=ve,ye=("https://emibcn.github.io/covid-data/Maps","https://emibcn.github.io/covid-data/Maps"),Ee="".concat(ye,"/days.json"),je="".concat(ye,"/Comarca.svg"),Ce="".concat(ye,"/Municipi.svg"),we="".concat(ye,"/MapData-Comarca-edat.json"),Oe="".concat(ye,"/MapData-Comarca-pcrpos.json"),ke="".concat(ye,"/MapData-Comarca-risc.json"),De="".concat(ye,"/MapData-Comarca-rt.json"),Se="".concat(ye,"/MapData-Comarca-taxa_conf.json"),xe="".concat(ye,"/MapData-Comarca-taxapcr.json"),Pe="".concat(ye,"/MapData-Municipi-edat.json"),Te="".concat(ye,"/MapData-Municipi-pcrpos.json"),Re="".concat(ye,"/MapData-Municipi-risc.json"),Me="".concat(ye,"/MapData-Municipi-rt.json"),Ae={days:Ee,metadata:{risc:{title:"Risc de rebrot (iEPG) a poblaci\xf3 general",label:"Risc de rebrot (iEPG)",name:"Risc de rebrot (iEPG)",colors:[{color:"#400",nom:"Risc m\xe0xim",valor:210},{color:"#800",nom:"Risc extrem",valor:190},{color:"#c00",nom:"Risc alt\xedssim",valor:160},{color:"#f00",nom:"Risc molt alt",valor:130},{color:"#f40",nom:"Risc alt",valor:100},{color:"#f80",nom:"Risc mitj\xe0-alt",valor:70},{color:"#fc0",nom:"Risc mitj\xe0",valor:50},{color:"#ff0",nom:"Risc mitj\xe0-baix",valor:30},{color:"#cf0",nom:"Risc baix",valor:15},{color:"#8f4",nom:"Risc molt baix",valor:5},{color:"#4f8",nom:"Risc no nul",valor:1},{color:"#0fc",nom:"Risc m\xednim",valor:0}]},taxa_conf:{title:"Taxa setmanal de casos confirmats PCR a tota la poblaci\xf3",label:"Taxa confirmats per PCR",name:"Taxa setmanal de casos confirmats PCR",colors:[{color:"#a00",nom:">=300",valor:300},{color:"#d00",nom:">=200 i <300",valor:200},{color:"#f00",nom:">=100 i <200",valor:100},{color:"#f80",nom:">=75 i <100",valor:75},{color:"#fa0",nom:">=50 i <75",valor:50},{color:"#fc0",nom:">=25 i <50",valor:25},{color:"#0b0",nom:">=15 i <25",valor:15},{color:"#090",nom:"<15",valor:0}]},rt:{title:"Velocitat de propagaci\xf3 (Rt) a poblaci\xf3 general",label:"Rt",name:"Velocitat de propagaci\xf3 (Rt)",colors:[{color:"#f00",nom:">=2",valor:2},{color:"#f70",nom:">=1.5 i <2",valor:1.5},{color:"#fa0",nom:">=1.2 i <1.5",valor:1.2},{color:"#fc0",nom:">1 i <1.2",valor:1.00001},{color:"#0a0",nom:"<=1",valor:0}]},edat:{title:"Mitjana d'edat dels casos confirmats per PCR a tota la poblaci\xf3",label:"Mitjana edat",name:"Mitjana d'edat dels casos confirmats per PCR",colors:[{color:"#08519c",nom:">=60",valor:60},{color:"#3182bd",nom:">=50 i <60",valor:50},{color:"#6baed6",nom:">=40 i <50",valor:40},{color:"#9ecae1",nom:">=30 i <40",valor:30},{color:"#c6dbef",nom:">=20 i <30",valor:20},{color:"#eff3ff",nom:"< 20",valor:0}]},pcrpos:{title:"Percentatge de PCR positives a tota la poblaci\xf3",label:"% PCR +",name:"Percentatge de PCR positives",colors:[{color:"#a50026",nom:">=40%",valor:40},{color:"#d73027",nom:">=30% i <40%",valor:30},{color:"#f46d43",nom:">=20% i <30%",valor:20},{color:"#fdae61",nom:">=15% i <20%",valor:15},{color:"#fee08b",nom:">=10% i <15%",valor:10},{color:"#ffffbf",nom:">=8% i <10%",valor:8},{color:"#66bd63",nom:">=5% i <8%",valor:5},{color:"#1a9850",nom:">=3% i <5%",valor:3},{color:"#006837",nom:"<3%",valor:0}]},taxapcr:{title:"Taxa PCR per 100.000 habitants a tota la poblaci\xf3",label:"Taxa PCR",name:"Taxa PCR per 100.000 habitants",colors:[{color:"#08306b",nom:">=1000",valor:1e3},{color:"#08519c",nom:">=800 i <1000",valor:800},{color:"#2171b5",nom:">=600 i <800",valor:600},{color:"#4292c6",nom:">=500 i <600",valor:500},{color:"#6baed6",nom:">=400 i <500",valor:400},{color:"#9ecae1",nom:">=300 i <400",valor:300},{color:"#c6dbef",nom:">=200 i <300",valor:200},{color:"#deebf7",nom:">=100 i <200",valor:100},{color:"#f7fbff",nom:"<100",valor:0}]}},kind:{Comarca:{svg:je,values:{risc:ke,taxa_conf:Se,rt:De,edat:we,pcrpos:Oe,taxapcr:xe}},Municipi:{svg:Ce,values:{risc:Re,taxa_conf:"".concat(ye,"/MapData-Municipi-taxa_conf.json"),rt:Me,edat:Pe,pcrpos:Te,taxapcr:"".concat(ye,"/MapData-Municipi-taxapcr.json")}}}},Ne=function(e){Object(y.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).name="Maps JSON Files",e.timerDataUpdate=!1,e.officialUpdateTime="10:35".split(":"),e.days=function(e){return be.fetch(Ae.days,e)},e.data=function(e,t,a){return be.fetch(Ae.kind[e].values[t],a)},e.checkUpdate=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};be.checkIfNeedUpdate(Ae.days,(function(e){t(e)}),(function(t){console.error("".concat(e.name,": updating data from backend: "),t),a(t)}))},e.updateAll=function(e){!function(){var e=Object(pe.a)(ue.a.mark((function e(t){var n,r,i,o,c,l;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(de.a)(a.kinds()),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=26;break}i=r.value,o=Object(de.a)(a.values(i)),e.prev=6,o.s();case 8:if((c=o.n()).done){e.next=15;break}return l=c.value,e.next=13,be.invalidate(Ae.kind[i].values[l]);case 13:e.next=8;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(6),o.e(e.t0);case 20:return e.prev=20,o.f(),e.finish(20);case 23:case 24:e.next=3;break;case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(1),n.e(e.t1);case 31:return e.prev=31,n.f(),e.finish(31);case 34:return e.next=38,be.invalidate(Ae.days);case 38:t(!0);case 39:case"end":return e.stop()}}),e,null,[[1,28,31,34],[6,17,20,23]])})));return function(t){return e.apply(this,arguments)}}()(e)},e.updateIfNeeded=function(t){e.checkUpdate((function(a){a?e.updateAll((function(){return t(!0)})):t(!1)}))},e.cancelUpdateSchedule=function(){e.timerDataUpdate&&clearTimeout(e.timerDataUpdate)},e.scheduleNextUpdate=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1===t?e.millisToNextUpdate():t;e.cancelUpdateSchedule(),e.timerDataUpdate=setTimeout((function(){return e.updateIfNeeded((function(t){return!(!a&&t)&&e.scheduleNextUpdate(!t&&3e5)}))}),n)},e.millisToNextUpdate=function(){var t=new Date,a=Object(le.a)(Date,[t.getFullYear(),t.getMonth(),t.getDate()].concat(Object(Z.a)(e.officialUpdateTime),[0,0]))-t;return a<=0?a+864e5:a},e}return a}(me);Ne.kinds=function(){return Object.keys(Ae.kind)},Ne.values=function(e){return Object.keys(Ae.kind[e].values)},Ne.svg=function(e){return Ae.kind[e].svg},Ne.metadata=function(e,t){return Ae.metadata[e][t]},Ne.metaColors=function(e){return Ne.metadata(e,"colors")},Ne.metaTitle=function(e){return Ne.metadata(e,"title")},Ne.metaLabel=function(e){return Ne.metadata(e,"label")},Ne.metaName=function(e){return Ne.metadata(e,"name")};var Ie=Ne,We=a(130),Ve=a(307),Ue=a(196),Le=(a(381),function(){return c.a.createElement("span",null,"Error!")}),Fe=function(){return c.a.createElement(Y,null)},ze=function(e){Object(y.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).svg=null,e.wrapperNodeSVG=c.a.createRef(),e.getSVG=function(){return e.wrapperNodeSVG.current.svgWrapper.querySelector("svg")},e.isSVGMounted=function(){return e.wrapperNodeSVG&&"current"in e.wrapperNodeSVG&&e.wrapperNodeSVG.current&&"svgWrapper"in e.wrapperNodeSVG.current&&e.wrapperNodeSVG.current.svgWrapper&&"querySelector"in e.wrapperNodeSVG.current.svgWrapper&&e.getSVG()},e.get_color_fons=function(t){var a=e.props.colors.find((function(e){return t>=e.valor}));return a?a.color:"fff"},e.setColorBackground=function(t,a,n){var r=t.querySelector("#".concat(n));r&&(r.style.fill=e.get_color_fons(a[n]))},e.omplir_colors=function(t){var a=e.props.valors[e.props.indexValues],n=e.setColorBackground.bind(Object(We.a)(e),t,a);Object.keys(a).forEach(n)},e.getTipContent=function(t){if(t&&e.isSVGMounted()){var a=e.props.valors[e.props.indexValues],n=e.svg.querySelector("#".concat(t));if(!n)return"";var r=n.getAttribute("label");return c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",null,r),e.props.label,": ",a[t])}return""},e.setTooltipData=function(t){var a="mapa-".concat(e.props.id);t.querySelectorAll(".map_elem").forEach((function(e){e.setAttribute("data-tip",e.id),e.setAttribute("data-for",a)}))},e.beforeInjection=function(t){e.svg=t,e.omplir_colors(t),e.setTooltipData(t)},e.afterInjection=function(t,a){if(t)throw Error(t);Ue.a.rebuild(),e.svg=a,e.omplir_colors(e.svg)},e.updateColorsIfPossible=function(){e.isSVGMounted()&&e.svg&&e.omplir_colors(e.svg)},e}return Object(v.a)(a,[{key:"componentDidUpdate",value:function(e,t){this.updateColorsIfPossible()}},{key:"componentDidMount",value:function(){this.updateColorsIfPossible()}},{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(Ve.a,{src:this.props.mapSrc,ref:this.wrapperNodeSVG,role:"img","aria-label":"Description of the overall image",beforeInjection:this.beforeInjection,afterInjection:this.afterInjection,evalScripts:"never",fallback:Le,loading:Fe,renumerateIRIElements:!1}),c.a.createElement(Ue.a,{id:"mapa-".concat(this.props.id),getContent:this.getTipContent}))}}]),a}(c.a.Component);ze.defaultProps={dies:[],valors:[],indexValues:0,label:"Index"};var Ge=ze,He=a(727),_e=a(719),Ke=a(718),Be=a(723),qe=a(312),Ye=Object(s.a)((function(e){return{formControl:{minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}})),Je=function(e){var t=Ye(),a=e.label,n=e.help,i=e.id,o=e.options,l=Object(r.a)(e,["label","help","id","options"]);return c.a.createElement("div",{style:{margin:"0 auto",display:"block"}},c.a.createElement(Ke.a,{required:!0,className:t.formControl},c.a.createElement(He.a,{htmlFor:i},a),c.a.createElement(Be.a,Object.assign({native:!0},l,{"aria-describedby":"helper-text-".concat(i),inputProps:{name:a,id:i}}),o.map((function(e){return c.a.createElement("option",{key:"v_".concat(e.value),value:e.value},e.label)}))),n?c.a.createElement(_e.a,{id:"helper-text-".concat(i)},n):null))},$e=Ie.kinds().map((function(e){return{value:e,label:e}})),Qe=Object(l.translate)("Widget/Map/Edit")((function(e){var t=e.t,a=Object(r.a)(e,["t"]);return c.a.createElement(Je,Object.assign({options:$e,label:t("Type"),help:t("Select the regions type to show")},a))})),Xe=Ie.kinds().reduce((function(e,t){return e[t]=Ie.values(t).map((function(e){return{value:e,label:Ie.metaName(e)}})),e}),{}),Ze=Object(l.translate)("Widget/Map/Edit")((function(e){var t=e.kind,a=e.t,n=Object(r.a)(e,["kind","t"]);return c.a.createElement(Je,Object.assign({label:a("Values"),help:a("Select the data origin"),options:Xe[t]},n))})),et=function(e){Object(y.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onChangeMapKind=function(t){return e.props.onChangeMapKind(t.target.value)},e.onChangeMapValue=function(t){return e.props.onChangeMapValue(t.target.value)},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props,t=e.mapKind,a=e.mapValue;return c.a.createElement("div",{style:{textAlign:"left"}},c.a.createElement(Qe,{value:t,onChange:this.onChangeMapKind}),c.a.createElement(qe.a,{style:{margin:"2em 0"}}),c.a.createElement(Ze,{kind:t,value:a,onChange:this.onChangeMapValue}))}}]),a}(c.a.PureComponent),tt=function(e){return c.a.createElement("table",{style:{margin:"0 auto",marginTop:".5em"}},c.a.createElement("tbody",null,e.colors.map((function(t,a){return c.a.createElement("tr",{key:a},c.a.createElement("td",{style:{paddingRight:20,textAlign:"left"}},t.nom),c.a.createElement("td",null,0===a?"> ".concat(t.valor):"".concat(t.valor,"-").concat(e.colors[a-1].valor)),c.a.createElement("td",{style:{backgroundColor:t.color,width:50,border:"1px solid #000"}}))}))))},at=F({view:{icon:c.a.createElement(m.a,{icon:f.e}),label:function(e){return(0,e.t)("View")},title:function(e){return e.name},render:function(e){return c.a.createElement(c.a.Fragment,null,null===e.mapData?c.a.createElement(Y,null):c.a.createElement(Ge,{label:e.label,dies:e.days,valors:e.mapData.valors,mapSrc:Ie.svg(e.mapKind),indexValues:e.indexValues,colors:e.colors,id:e.id}))}},edit:{icon:c.a.createElement(m.a,{icon:f.c}),label:function(e){return(0,e.t)("Edit")},title:function(e){return(0,e.t)("Edit map parameters")},render:function(e){return c.a.createElement(et,{mapKind:e.mapKind,mapValue:e.mapValue,onChangeMapKind:e.onChangeMapKind,onChangeMapValue:e.onChangeMapValue})}},legend:{icon:c.a.createElement(m.a,{icon:f.f}),label:function(e){return(0,e.t)("Legend")},title:function(e){return e.title},render:function(e){return c.a.createElement(tt,{colors:e.colors,subtitle:e.days[e.indexValues]})}}}),nt=function(e){Object(y.a)(a,e);var t=Object(b.a)(a);function a(e){var n;Object(g.a)(this,a),(n=t.call(this,e)).getMeta=function(e){return{colors:Ie.metaColors(e),title:Ie.metaTitle(e),label:Ie.metaLabel(e),name:Ie.metaLabel(e)}},n.updateData=function(){var e=n.props,t=e.mapKind,a=e.mapValue;n.cancelDataUpdate&&n.cancelDataUpdate(),n.cancelDataUpdate=n.MapData.data(t,a,(function(e){t===n.props.mapKind&&a===n.props.mapValue&&n.setState({mapData:e})}))},n.onChangeMapKind=function(e){var t=n.props.mapValue;n.setState({mapData:null}),n.props.onChangeData(n.props.id,{mapKind:e,mapValue:t})},n.onChangeMapValue=function(e){var t=n.props.mapKind;n.setState(Object(i.a)({mapData:null},n.getMeta(e))),n.props.onChangeData(n.props.id,{mapKind:t,mapValue:e})},n.MapData=new Ie,n.cancelDataUpdate=!1;var r=e.mapKind,o=e.mapValue;return n.state=Object(i.a)({mapData:null,mapKindDefault:r,mapValueDefault:o},n.getMeta(o)),n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.updateData()}},{key:"componentDidUpdate",value:function(e,t){t.mapData!==this.state.mapData&&null===this.state.mapData?this.updateData():this.props.mapKind===e.mapKind&&this.props.mapValue===e.mapValue||this.setState({mapData:null})}},{key:"render",value:function(){var e=this.props,t=e.days,a=e.indexValues,n=e.id,r=e.mapKind,i=e.mapValue,o=this.state,l=o.mapData,s=o.mapKindDefault,u=o.mapValueDefault,d=o.colors,p=o.title,h=o.label,m=o.name;return c.a.createElement("div",{style:{minWidth:"200px",height:"100%",paddingTop:".3em",flex:"1 1 0px"}},c.a.createElement(at,{id:n,mapKind:r,mapValue:i,mapKindDefault:s,mapValueDefault:u,onChangeMapKind:this.onChangeMapKind,onChangeMapValue:this.onChangeMapValue,onRemove:this.props.onRemove,mapData:l,indexValues:a,days:t,colors:d,title:p,label:h,name:m}))}}]),a}(c.a.Component),rt=Ie.kinds()[0],it=Ie.values(rt)[0];nt.defaultProps={mapKind:rt,mapValue:it,onChangeData:function(){},onRemove:function(){}};var ot=nt,ct=("https://emibcn.github.io/covid-data/Charts","https://emibcn.github.io/covid-data/Charts"),lt="".concat(ct,"/index.json"),st="".concat(ct,"/chart.json"),ut=function(e){Object(y.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(g.a)(this,a),(n=t.call(this)).name="Charts JSON Files",n.timerDataUpdate=!1,n.officialUpdateTime="10:35".split(":"),n.divisions=[],n.populations=[],n.indexData=[],n.index=function(e){return be.fetch(lt,e)},n.parseIndex=function(e){n.divisions=Object(Z.a)(new Set(e.map((function(e){return e.territori})))),n.populations=Object(Z.a)(new Set(e.map((function(e){return e.poblacio})))),n.indexData=e},n.active=[],n.findBreadcrumb=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e,t){return e.url===t};if(a(e,t))return[e];if("children"in e){var r,i=Object(de.a)(e.children);try{for(i.s();!(r=i.n()).done;){var o=r.value,c=n.findBreadcrumb(o,t,a);if(c.length)return[].concat(Object(Z.a)(c),[e])}}catch(l){i.e(l)}finally{i.f()}}return[]},n.findChild=function(e,t,a){var r=n.findBreadcrumb(e,t,a);if(r.length)return r[0]},n.findInitialNode=function(e,t){return n.indexData.find((function(a){return a.territori===e&&a.poblacio===t}))},n.data=function(e,t,a,r){var i=n.findInitialNode(e,t);if(i){var o=n.findChild(i,a);return o?(n.active.includes(o.url)||n.active.push(o.url),be.fetch("".concat(st,"%3F").concat(o.url),r)):(console.warn("Could not find data in index: ".concat(e,"/").concat(t,"/").concat(a),{initialLink:i,index:n.indexData}),r(!1),function(){})}return console.warn("Could not find initial node in index: ".concat(e,"/").concat(t,"/").concat(a),{initialLink:i,index:n.indexData}),r(!1),function(){}},n.checkUpdate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};be.checkIfNeedUpdate(lt,(function(t){e(t)}),(function(e){console.error("".concat(n.name,": updating data from backend: "),e),t(e)}))},n.updateAll=function(e){!function(){var e=Object(pe.a)(ue.a.mark((function e(t){var a,r,i;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object(de.a)(n.active),e.prev=1,a.s();case 3:if((r=a.n()).done){e.next=10;break}return i=r.value,e.next=8,be.invalidate("".concat(st,"?").concat(i));case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),a.e(e.t0);case 15:return e.prev=15,a.f(),e.finish(15);case 18:return e.next=21,be.invalidate(lt);case 21:t(!0);case 22:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()(e)},n.updateIfNeeded=function(e){n.checkUpdate((function(t){t?n.updateAll((function(){return e(!0)})):e(!1)}))},n.cancelUpdateSchedule=function(){n.timerDataUpdate&&clearTimeout(n.timerDataUpdate)},n.scheduleNextUpdate=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=!1===e?n.millisToNextUpdate():e;n.cancelUpdateSchedule(),n.timerDataUpdate=setTimeout((function(){return n.updateIfNeeded((function(e){return!(!t&&e)&&n.scheduleNextUpdate(!e&&3e5)}))}),a)},n.millisToNextUpdate=function(){var e=new Date,t=Object(le.a)(Date,[e.getFullYear(),e.getMonth(),e.getDate()].concat(Object(Z.a)(n.officialUpdateTime),[0,0]))-e;return t<=0?t+864e5:t},e?n.parseIndex(e):n.index(n.parseIndex),n}return a}(me),dt=a(30),pt={grafic_risc_iepg:function(e){var t=e.graph,a=e.dies,n=e.indexValues,r=c.a.useMemo((function(){return t.data[0].data.map((function(e,t){return{v:e,x:a[t]}}))}),[t,a]);return c.a.createElement(dt.g,{width:"100%",height:350},c.a.createElement(dt.e,{data:r,margin:{bottom:20,right:10,left:0},syncId:"charts"},c.a.createElement(dt.d,{type:"monotone",dataKey:"v",dot:null,name:t.data[0].label,stroke:"#000000",strokeWidth:2}),c.a.createElement(dt.f,{y:30,stroke:"#0f0",strokeDasharray:"3 3"}),c.a.createElement(dt.f,{y:70,stroke:"#ff0",strokeDasharray:"3 3"}),c.a.createElement(dt.f,{y:100,stroke:"#f00",strokeDasharray:"3 3"}),c.a.createElement(dt.f,{x:a[n],label:"".concat(r[n].v),stroke:"#777",strokeDasharray:"3 3"}),c.a.createElement(dt.b,{stroke:"#ccc"}),c.a.createElement(dt.i,{dataKey:"x",angle:-30,dx:-5,dy:15}),c.a.createElement(dt.j,null),c.a.createElement(dt.h,null)))},grafic_extensio:function(e){var t=e.graph,a=e.dies,n=e.indexValues,r=c.a.useMemo((function(){var e,n=(null===t||void 0===t||null===(e=t.data[0])||void 0===e?void 0:e.data)?function(e,t){return t.map((function(t,a){if(a<e.length)return e[e.length-a-1];var n=e[0].split("/").reverse().map((function(e){return Number(e)}));n[2]-=a-e.length;var r=Object(le.a)(Date,Object(Z.a)(n));return"".concat(r.getDate(),"/").concat(r.getMonth(),"/").concat(r.getFullYear())})).reverse()}(a,t.data[0].data):a;return t.data[0].data.map((function(e,a){return{v0:e,v1:t.data[1].data[a],v2:t.data[2].data[a],x:n[a]}}))}),[t,a]);return c.a.createElement(dt.g,{width:"100%",height:350},c.a.createElement(dt.c,{data:r,margin:{bottom:20,right:10,left:0},syncId:"charts"},c.a.createElement(dt.f,{x:a[n],label:["".concat(r[n].v0),"".concat(r[n].v1),"".concat(r[n].v2)],stroke:"#777",strokeDasharray:"3 3"}),c.a.createElement(dt.a,{type:"monotone",dataKey:"v1",dot:null,name:t.data[1].label,fill:"#cacaca",stroke:"#cacaca",strokeWidth:1}),c.a.createElement(dt.a,{type:"monotone",dataKey:"v0",dot:null,name:t.data[0].label,fill:"#648ac8",stroke:"#648ac8",strokeWidth:1}),c.a.createElement(dt.d,{type:"monotone",dataKey:"v2",dot:null,name:t.data[2].label,stroke:"#969696",strokeWidth:1}),c.a.createElement(dt.b,{stroke:"#ccc"}),c.a.createElement(dt.i,{dataKey:"x",angle:-30,dx:-5,dy:15}),c.a.createElement(dt.j,null),c.a.createElement(dt.h,null)))}},ht=function(e){var t=e.dataset,a=e.valors,n=Object(r.a)(e,["dataset","valors"]),i=pt[t];return c.a.createElement(i,Object.assign({graph:a[t]},n))},mt=a(720),ft=a(300),gt=a.n(ft),vt=a(301),bt=a.n(vt),yt=a(728),Et=Object(s.a)({root:{height:110,flexGrow:1,maxWidth:400}}),jt=function(e){var t=Et(),a=e.chartsIndex,n=e.division,i=e.population,o=e.value,l=e.onChange,s=Object(r.a)(e,["chartsIndex","division","population","value","onChange"]),u=c.a.useMemo((function(){var e=new ut(a),t=e.findInitialNode(n,i);return{initialNode:t,found:e.findBreadcrumb(t,o).map((function(e){return"".concat(e.url)}))}}),[n,i,o,a]),d=u.initialNode,p=u.found;return c.a.createElement(mt.a,Object.assign({className:t.root,defaultCollapseIcon:c.a.createElement(gt.a,null),defaultExpandIcon:c.a.createElement(bt.a,null),expanded:p,selected:"".concat(o),onNodeSelect:function(e,t){return l(Number(t))}},s),function e(t){return c.a.createElement(yt.a,{key:t.url,nodeId:"".concat(t.url),label:t.name},Array.isArray(t.children)?t.children.map((function(t){return e(t)})):null)}(d))},Ct=Object(s.a)((function(e){return{formControl:{minWidth:120},selectEmpty:{marginTop:e.spacing(2)},labelFixed:{position:"initial",transform:"unset",marginBottom:e.spacing(2)}}})),wt=function(e){var t=Ct(),a=e.label,n=e.help,r=e.id,i=e.children,o=e.fixTree;return c.a.createElement("div",{style:{margin:"0 auto",display:"block"}},c.a.createElement(Ke.a,{required:!0,className:t.formControl},c.a.createElement(He.a,{className:o?t.labelFixed:null,htmlFor:r},a),i,n?c.a.createElement(_e.a,{id:"helper-text-".concat(r)},n):null))},Ot=function(e){var t=e.label,a=e.help,n=e.id,i=e.options,o=Object(r.a)(e,["label","help","id","options"]);return c.a.createElement(wt,{id:n,label:t,help:a},c.a.createElement(Be.a,Object.assign({native:!0},o,{"aria-describedby":"helper-text-".concat(n),inputProps:{name:t,id:n}}),i.map((function(e){return c.a.createElement("option",{key:"v_".concat(e.value),value:e.value},e.label)}))))},kt=Object(l.translate)("Widget/Chart/Edit")((function(e){var t=e.t,a=e.divisions,n=Object(r.a)(e,["t","divisions"]),i=c.a.useMemo((function(){return a.map((function(e){return{value:e,label:e}}))}),[a]);return c.a.createElement(Ot,Object.assign({options:i,label:t("Division"),help:t("Select the division type to show")},n))})),Dt=Object(l.translate)("Widget/Chart/Edit")((function(e){var t=e.t,a=e.populations,n=Object(r.a)(e,["t","populations"]),i=c.a.useMemo((function(){return a.map((function(e){return{value:e,label:e}}))}),[a]);return c.a.createElement(Ot,Object.assign({label:t("Population"),help:t("Select the population"),options:i},n))})),St=Object(l.translate)("Widget/Chart/Edit")((function(e){var t=e.t,a=Object(r.a)(e,["t"]),n=c.a.useMemo((function(){return[{value:"grafic_extensio",label:t("Extensi\xf3")},{value:"grafic_risc_iepg",label:t("Risc iEPG")}]}),[t]);return c.a.createElement(Ot,Object.assign({label:t("Dataset"),help:t("Select the dataset"),options:n},a))})),xt=function(e){Object(y.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onChangeChartDivision=function(t){return e.props.onChangeChartDivision(t.target.value)},e.onChangeChartPopulation=function(t){return e.props.onChangeChartPopulation(t.target.value)},e.onChangeChartDataset=function(t){return e.props.onChangeChartDataset(t.target.value)},e.onChangeChartRegion=function(t){return e.props.onChangeChartRegion(t)},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props,t=e.chartDivision,a=e.chartPopulation,n=e.chartDataset,r=e.chartRegion,i=e.divisions,o=e.populations,l=e.chartsIndex,s=e.t;return c.a.createElement("div",{style:{textAlign:"left"}},c.a.createElement(kt,{divisions:i,value:t,onChange:this.onChangeChartDivision}),c.a.createElement(qe.a,{style:{margin:"2em 0"}}),c.a.createElement(Dt,{populations:o,value:a,onChange:this.onChangeChartPopulation}),c.a.createElement(qe.a,{style:{margin:"2em 0"}}),c.a.createElement(St,{value:n,onChange:this.onChangeChartDataset}),c.a.createElement(qe.a,{style:{margin:"2em 0"}}),c.a.createElement(wt,{id:"regions-tree",label:s("Region"),fixTree:!0},c.a.createElement(jt,{id:"regions-tree",chartsIndex:l,division:t,population:a,value:r,onChange:this.onChangeChartRegion})))}}]),a}(c.a.PureComponent),Pt=Object(l.translate)("Widget/Chart/Edit")(xt),Tt=F({view:{icon:c.a.createElement(m.a,{icon:f.b}),label:function(e){return(0,e.t)("View")},title:function(e){return e.title},render:function(e){return c.a.createElement(c.a.Fragment,null,null===e.chartData?c.a.createElement(Y,null):c.a.createElement(ht,{dies:e.days,valors:e.chartData,dataset:e.chartDataset,indexValues:e.indexValues,id:e.id}))}},edit:{icon:c.a.createElement(m.a,{icon:f.c}),label:function(e){return(0,e.t)("Edit")},title:function(e){return(0,e.t)("Edit chart parameters")},render:function(e){return c.a.createElement(Pt,e)}}}),Rt=function(e){Object(y.a)(a,e);var t=Object(b.a)(a);function a(e){var n;Object(g.a)(this,a),(n=t.call(this,e)).getMeta=function(e,t,a,n,r){return r?{title:r[n].title,name:r[n].title}:{title:"...",name:"..."}},n.updateData=function(){var e=n.props,t=e.chartDivision,a=e.chartPopulation,r=e.chartRegion;n.cancelDataUpdate&&n.cancelDataUpdate(),n.cancelDataUpdate=n.ChartData.data(t,a,r,(function(e){t===n.props.chartDivision&&a===n.props.chartPopulation&&r===n.props.chartRegion&&n.setState(Object(i.a)({chartData:e},n.getMeta(t,a,r,n.props.chartDataset,e)))}))},n.findRegion=function(e,t,a){var r=n.props.chartsIndex,i=n.ChartData.findInitialNode(e,t),o=n.ChartData.findChild(i,a);if(!o){var c,l=r.filter((function(a){return e===a.territori&&t!==a.poblacio})),s=Object(de.a)(l);try{for(s.s();!(c=s.n()).done;){var u=c.value,d=n.ChartData.findChild(u,a),p=d&&n.ChartData.findChild(i,d.name,(function(e,t){return e.name===t}));if(p)return p}}catch(h){s.e(h)}finally{s.f()}return i}return o},n.onChangeChart=function(e,t,a,r,o){n.setState(Object(i.a)({},o===n.state.chartData?{chartData:o}:{},{},n.getMeta(e,t,a,r,o)));var c=n.findRegion(e,t,a);n.props.onChangeData(n.props.id,{chartDivision:e,chartPopulation:t,chartDataset:r,chartRegion:c.url})},n.onChangeChartDivision=function(e){var t=n.props,a=t.chartPopulation,r=t.chartRegion,i=t.chartDataset;n.onChangeChart(e,a,r,i,null)},n.onChangeChartPopulation=function(e){var t=n.props,a=t.chartDivision,r=t.chartRegion,i=t.chartDataset;n.onChangeChart(a,e,r,i,null)},n.onChangeChartRegion=function(e){var t=n.props,a=t.chartDivision,r=t.chartPopulation,i=t.chartDataset;n.onChangeChart(a,r,e,i,null)},n.onChangeChartDataset=function(e){var t=n.props,a=t.chartDivision,r=t.chartPopulation,i=t.chartRegion,o=n.state.chartData;n.onChangeChart(a,r,i,e,o)};var r=e.chartDivision,o=e.chartPopulation,c=e.chartRegion,l=e.chartsIndex;return n.ChartData=new ut(l),n.cancelDataUpdate=!1,n.state=Object(i.a)({chartData:null},n.getMeta(r,o,c,Mt,null)),n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.updateData()}},{key:"componentDidUpdate",value:function(e,t){t.chartData!==this.state.chartData&&null===this.state.chartData?this.updateData():this.props.chartDivision!==e.chartDivision||this.props.chartPopulation!==e.chartPopulation||this.props.chartRegion!==e.chartRegion?this.setState({chartData:null}):this.props.chartsIndex!==e.chartsIndex&&(this.ChartData=new ut(this.props.chartsIndex),this.setState({chartData:null}))}},{key:"render",value:function(){var e=this.props,t=e.days,a=e.indexValues,n=e.id,r=e.chartDivision,i=e.chartPopulation,o=e.chartDataset,l=e.chartRegion,s=e.chartsIndex,u=this.state,d=u.chartData,p=u.title,h=u.name;return c.a.createElement("div",{style:{minWidth:"200px",height:"100%",paddingTop:".3em",flex:"1 1 0px"}},c.a.createElement(Tt,{id:n,chartDivision:r,chartPopulation:i,chartDataset:o,chartRegion:l,chartsIndex:s,chartData:d,divisions:this.ChartData.divisions,populations:this.ChartData.populations,onChangeChartDivision:this.onChangeChartDivision,onChangeChartPopulation:this.onChangeChartPopulation,onChangeChartDataset:this.onChangeChartDataset,onChangeChartRegion:this.onChangeChartRegion,onRemove:this.props.onRemove,indexValues:a,days:t,title:p,name:h}))}}]),a}(c.a.Component),Mt="grafic_extensio";Rt.defaultProps={chartDivision:"REGI\xd3/AGA",chartPopulation:"Poblaci\xf3 total",chartRegion:0,chartDataset:Mt,onChangeData:function(){},onRemove:function(){}};var At=Rt,Nt=[{key:"map",Component:ot,icon:c.a.createElement(m.a,{icon:f.e}),name:"Map"},{key:"chart",Component:At,icon:c.a.createElement(m.a,{icon:f.b}),name:"Chart"}],It=function(){function e(){var t=this;Object(g.a)(this,e),this.timer=!1,this.clear=function(){!1!==t.timer&&(clearTimeout(t.timer),t.timer=!1)}}return Object(v.a)(e,[{key:"start",value:function(e){this.timer=setTimeout(this.clear,e)}},{key:"run",value:function(e,t,a){e&&this.clear(),!1===this.timer&&(this.start(t),a())}}]),e}(),Wt=a(726),Vt=(a(655),Object(s.a)((function(e){return{popper:{zIndex:1200},tooltip:{fontSize:"1rem"}}}))),Ut=function(e){var t=e.children,a=e.open,n=e.value,r=Vt();return c.a.createElement(ie.a,{open:a,enterTouchDelay:0,placement:"bottom",title:n,classes:{popper:r.popper,tooltip:r.tooltip},arrow:!0},t)},Lt=function(e){Object(y.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onChange=function(){e.props.isPlaying?e.props.onPause():e.props.onPlay()},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.t;return c.a.createElement(ie.a,{title:a("Toggle play status"),"aria-label":this.props.isPlaying?a("pause"):a("play")},c.a.createElement("div",{className:"playpause ".concat(t||"")},c.a.createElement("input",{type:"checkbox",id:"playpause",name:"check",checked:!this.props.isPlaying,onChange:this.onChange,"aria-label":a("Toggle play status")}),c.a.createElement("label",{htmlFor:"playpause",style:{borderLeftColor:""}})))}}]),a}(c.a.PureComponent),Ft=Object(l.translate)("PlayPause")(Lt),zt=function(e){Object(y.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={isPlaying:!1},e.timer=!1,e.onPause=function(){e.clearTimer(),e.setState({isPlaying:!1})},e.onPlay=function(){e.setTimer(),e.setState({isPlaying:!0})},e.setTimer=function(){e.clearTimer(),e.timer=setTimeout(e.updatePlay,40)},e.clearTimer=function(){e.timer&&(clearTimeout(e.timer),e.timer=!1)},e.updatePlay=function(){e.props.onChange({},e.props.value<e.props.max-1?e.props.value+1:0),e.setTimer()},e}return Object(v.a)(a,[{key:"componentWillUnmount",value:function(){this.clearTimer()}},{key:"render",value:function(){var e=this.state.isPlaying,t=this.props,a=t.classes,n=void 0===a?{}:a,o=Object(r.a)(t,["classes"]),l=n.playPause,s=Object(r.a)(n,["playPause"]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(Wt.a,Object.assign({ValueLabelComponent:Ut,step:1,min:0,style:{margin:"0 1em"},classes:Object(i.a)({},s)},o)),c.a.createElement(Ft,{className:l,onPlay:this.onPlay,onPause:this.onPause,isPlaying:e}))}}]),a}(c.a.PureComponent),Gt=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},Ht=function(e){Object(y.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(g.a)(this,a),(n=t.call(this,e)).state={days:null,chartsIndex:null,current:null,marks:[],marksSmall:[]},n.widgetsIds=[],n.throtle=new It,n.MapData=new Ie,n.ChartData=new ut,n.updateIDs=function(e){for(;n.widgetsIds.length<e;)n.widgetsIds.push("a-"+Gt()+Gt()+"-"+Gt()+"-"+Gt()+"-"+Gt()+"-"+Gt()+Gt()+Gt())},n.onSetDate=function(e,t){return n.throtle.run(!1,10,(function(){return n.setState({current:t})}))},n.sliderTipFormatter=function(e){return n.state.days[e]},n.onAdd=function(e){var t=Object(Z.a)(n.props.widgets);return t.push({type:null!==e&&void 0!==e?e:"map"}),n.updateIDs(t.length),n.props.onChangeData({widgets:t})},n.onRemove=function(e){var t=n.props.widgets.filter((function(t,a){return n.widgetsIds[a]!==e}));return n.widgetsIds=n.widgetsIds.filter((function(t){return t!==e})),n.props.onChangeData({widgets:t})},n.onChangeData=function(e,t){var a=n.props.widgets.map((function(a,r){return Object(i.a)({},a,{},e===n.widgetsIds[r]?{payload:t}:{})}));return n.props.onChangeData({widgets:a})},"widgets"in e&&n.updateIDs(e.widgets.length),n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.MapData.days((function(t){var a=!e.state.current||!e.state.days||e.state.current===e.state.days.length-1,n=t.map((function(e,t){return{day:e,index:t}})).filter((function(e){var t=e.day;e.index;return/^0?1\//.test(t)})).map((function(e){var t=e.day;return{value:e.index,label:t.replace(/^0/,"")}}));e.setState(Object(i.a)({days:t,marks:n,marksSmall:n.map((function(e){return{value:e.value}}))},a?{current:t.length-1}:{})),e.MapData.scheduleNextUpdate()})),this.ChartData.index((function(t){e.setState({chartsIndex:t}),e.ChartData.scheduleNextUpdate()}))}},{key:"componentWillUnmount",value:function(){this.MapData.cancelUpdateSchedule(),this.ChartData.cancelUpdateSchedule(),this.throtle.clear()}},{key:"componentDidUpdate",value:function(){this.updateIDs(this.props.widgets.length)}},{key:"render",value:function(){var e=this;if(!this.state.days||!this.state.chartsIndex)return c.a.createElement(Y,null);var t=this.props,a=t.widgets,n=t.classes,r=t.showMarkLabels,i=this.state,o=i.days,l=i.chartsIndex,s=i.current,u=i.marks,d=i.marksSmall,p=Object(te.a)(n.paper,n.fixed);return c.a.createElement(c.a.Fragment,null,c.a.createElement(re.a,{className:p,elevation:2},c.a.createElement("div",{className:n.appBarSpacer}),c.a.createElement("div",{className:n.sliderContainer},c.a.createElement(ce,{onAdd:this.onAdd,className:n.addButton,options:Nt}),c.a.createElement(zt,{classes:{playPause:n.playPause},max:o.length-1,value:s||0,onChange:this.onSetDate,valueLabelFormat:this.sliderTipFormatter,getAriaValueText:this.sliderTipFormatter,marks:r?u:d,valueLabelDisplay:r?null:"on"}))),c.a.createElement(ne.a,{container:!0,spacing:3,className:n.widgetsContainer},a.map((function(t,a){var n=Nt.find((function(e){return e.key===t.type})).Component;return c.a.createElement(ne.a,{item:!0,xs:12,sm:6,md:4,lg:3,key:e.widgetsIds[a]},c.a.createElement(n,Object.assign({id:e.widgetsIds[a],key:e.widgetsIds[a],days:o,chartsIndex:l,indexValues:s,onChangeData:e.onChangeData,onRemove:e.onRemove},t.payload)))}))))}}]),a}(c.a.PureComponent),_t=G(Object(ae.a)((function(e){var t,a;return{appBarSpacer:e.mixins.toolbar,widgetsContainer:{zIndex:10,width:"100%",margin:0},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixed:{position:"sticky",top:0,zIndex:1200,padding:0,paddingBottom:1},sliderContainer:(a={display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:e.spacing(1),marginBottom:e.spacing(.5),marginLeft:e.spacing(1),marginRight:e.spacing(1)},Object(ee.a)(a,e.breakpoints.up("md"),{marginBottom:e.spacing(1),alignItems:"flex-start"}),Object(ee.a)(a,"@media (pointer: coarse)",(t={},Object(ee.a)(t,e.breakpoints.up("md"),{marginTop:e.spacing(.5),paddingBottom:e.spacing(1)}),Object(ee.a)(t,e.breakpoints.down("sm"),{paddingBottom:e.spacing(.1)}),t)),a),addButton:Object(ee.a)({padding:0,fontSize:e.spacing(4),boxShadow:"3px 3px 5px 2px rgba(100, 100, 100, .3)",borderRadius:3},e.breakpoints.up("md"),{fontSize:e.spacing(6)}),playPause:Object(ee.a)({fontSize:e.spacing(2)},e.breakpoints.up("md"),{fontSize:e.spacing(3)})}}))(function(e){return function(t){var a=Object(k.a)(),n=Object(O.a)(a.breakpoints.up("md"));return c.a.createElement(e,Object.assign({},t,{showMarkLabels:n}))}}(Ht))),Kt=function(e){return c.a.createElement(X,{pathFilter:"/:widgets*",paramsFilter:function(t){var a,n=t.widgets;try{a=n.split("/").map((function(e){return JSON.parse(decodeURIComponent(e))}))}catch(r){a=[]}return Object.assign({},e,{widgets:a})},paramsToString:function(e){var t=e.widgets.map((function(e){return encodeURIComponent(JSON.stringify({type:e.type,payload:e.payload}))})).join("/");return"/".concat(t)}},c.a.createElement(_t,e))}},306:function(e,t,a){"use strict";var n=a(91),r=a(20),i=a(0),o=a.n(i),c=a(24),l=a(4),s=a(19),u=a(658),d=a(708),p=a(314),h=a(304),m=a(707),f=a(722),g=a(709),v=a(710),b=a(49),y=a(311),E=a(711),j=a(706),C=a(139),w=a.n(C),O=a(281),k=a(283),D=a(103),S=a(11),x=a(15),P=a(17),T=a(16),R=a(25),M=a(26),A=function(e){Object(T.a)(a,e);var t=Object(P.a)(a);function a(){return Object(S.a)(this,a),t.apply(this,arguments)}return Object(x.a)(a,[{key:"render",value:function(){var e=this.props.t;return o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",{id:"modal_heading"},o.a.createElement(R.a,{icon:M.f,style:{marginRight:".5em"}}),e("About")),o.a.createElement("div",{id:"modal_description",style:{textAlign:"left"}},o.a.createElement("p",null,e("This applications displays public information extracted from the official web")," ",o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://dadescovid.cat"},"https://dadescovid.cat"),"."),o.a.createElement("p",null,e("The aim of this application is to display the data in different ways than the original, improving performance and adding more value to it.")),o.a.createElement("h3",null,e("Want more information?")),o.a.createElement("p",null,o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/emibcn/covid"},e("The source code is publicly available."))," ",e("There, you can find more information about how it has been done, licence and credits.")),o.a.createElement("h3",null,e("Found a bug? Have a petition? Want to help somehow?")),o.a.createElement("p",null,o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/emibcn/covid/issues"},e("Create an issue at GitHub."))),o.a.createElement("h3",null,e("Licenses")),o.a.createElement("p",null,e("The application, scripts and documentation in")," ",o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/emibcn/covid"},e("this project"))," ",e("are released under the")," ",o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/emibcn/covid/blob/master/LICENSE"},"GNU General Public License v3.0"),"."),o.a.createElement("p",null,e("The scripts and documentation published in")," ",o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/emibcn/covid-data/"},"covid-data")," ",e("are also released under the")," ",o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/emibcn/covid/blob/master/LICENSE"},"GNU General Public License v3.0"),"."),o.a.createElement("p",null,e("The data scrapped and published in")," ",o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/emibcn/covid-data/"},"covid-data")," ",e("is licensed by their owner, the")," ",o.a.createElement("em",null,"Generalitat de Catalunya"),e(", under their own conditions ("),o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://opendatacommons.org/licenses/by/1.0/"},"Open Data Commons Attribution License"),e(", until now).")," ",e("See more at the")," ",o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://analisi.transparenciacatalunya.cat/Salut/Dades-setmanals-de-COVID-19-per-comarca/jvut-jxu8"},e("dataset API documentation")),".")))}}]),a}(o.a.Component),N=Object(s.translate)("About")(A),I=Object(s.translate)("Copyright")((function(e){var t=e.t;return o.a.createElement(b.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",o.a.createElement(j.a,{color:"inherit",href:"https://github.com/emibcn/covid"},t("Source code of:")," ",o.a.createElement("em",null,t("Covid Data")," ",o.a.createElement("code",null,t("Refactored"))))," ",(new Date).getFullYear(),".")})),W=function(e){var t=Object(p.a)("(prefers-color-scheme: dark)"),a=e.type,n=e.children,r=o.a.useMemo((function(){return Object(h.a)({palette:{type:a||(t?"dark":"light")}})}),[t,a]);return o.a.createElement(m.a,{theme:r},o.a.createElement(d.a,null),n)},V=Object(u.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)}}})),U=function(e){return o.a.createElement(k.a,{force:!1},o.a.createElement(c.b,{exact:!0,path:"about",render:function(e){return t="About",a=o.a.createElement(N,null),o.a.createElement(D.a,{origin:t,key:t},a);var t,a}}))};t.a=Object(s.translate)("Widget")((function(e){var t=V(),a=e.children,i=e.theme,c=e.t,s=Object(r.a)(e,["children","theme","t"]),u=o.a.useState(!1),d=Object(n.a)(u,2),p=d[0],h=d[1],m=function(){h(!0)};return o.a.createElement(W,{type:i},o.a.createElement(U,null),o.a.createElement("div",{id:"root",className:t.root},o.a.createElement(g.a,{position:"absolute",className:Object(l.a)(t.appBar,p&&t.appBarShift)},o.a.createElement(v.a,{className:t.toolbar},o.a.createElement(y.a,{edge:"start",color:"inherit","aria-label":"open menu",onClick:m,className:Object(l.a)(t.menuButton,p&&t.menuButtonHidden)},o.a.createElement(w.a,null)),o.a.createElement(b.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:t.title},c("Covid Data")," ",o.a.createElement("code",null,c("Refactored"))))),o.a.createElement(O.a,Object.assign({handleDrawerOpen:m,handleDrawerClose:function(){h(!1)},open:p},s)),o.a.createElement("main",{className:t.content},a,o.a.createElement(E.a,{maxWidth:"lg",className:t.container},o.a.createElement(f.a,{pt:4},o.a.createElement(I,null))))))}))},358:function(e,t,a){e.exports=a(359)},359:function(e,t,a){"use strict";a.r(t),function(e){var t=a(0),n=a.n(t),r=a(18),i=a.n(r),o=a(278),c=a(302);i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(o.a,{onLoadNewServiceWorkerAccept:function(t){var a;t.waiting&&(navigator.serviceWorker.addEventListener("controllerchange",(function(t){a||(a=!0,console.log("Controller loaded"),e.location.reload(!0))})),t.waiting.postMessage("skipWaiting"))}})),document.getElementById("root")),c.a({onUpdate:function(e){var t=new CustomEvent("onNewServiceWorker",{detail:{registration:e}});document.dispatchEvent(t)}})}.call(this,a(37))},381:function(e,t,a){},655:function(e,t,a){}},[[358,1,2]]]);
//# sourceMappingURL=main.4ffa42e3.chunk.js.map